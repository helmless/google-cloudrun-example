name: ðŸš€ Deploy Helmless Example

concurrency:
  group: deploy
  cancel-in-progress: false

on:
  workflow_dispatch:
  push:
    branches: [main]
    paths:
      - 'helmless-chart/**'

jobs:
  development:
    name: ðŸš€ Development
    uses: ./.github/workflows/_deploy.yaml
    with:
      environment: dev
      dry_run: false

  staging:
    name: ðŸš€ Staging
    uses: ./.github/workflows/_deploy.yaml
    needs: development
    with:
      environment: stg
      dry_run: false

  production:
    name: ðŸš€ Production
    uses: ./.github/workflows/_deploy.yaml
    needs:
      - development
      - staging
    with:
      environment: prd
      dry_run: false